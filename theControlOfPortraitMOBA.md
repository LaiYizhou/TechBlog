## 一条探索“竖屏单手MOBA操作方式”的荆棘之路

### 一、往哪走

最开始，我们梳理定位：**我们游戏的Control模块特色定位是什么？** 三点：**竖屏、轻量、单手。**

其次，再梳理清楚需求：**一个Control模块需要操作角色哪些行为？** 四个行为：**移动、普攻、技能、大招。**



### 二、从“轻量”出发

因为定位是轻量，所以最初的思路是 UI应该尽可能的少。那么，接下来的思考点就是：**如果仅仅使用一个UI，怎么在一个UI上区分不同的操作？**

常见的UI事件是KeyDown/KeyUp/Drag（Enter/Exit也可以尝试，不过需要注意的是Enter和Down的触发顺序PC和手机上是不一致的）。

方案1是：

只有一个摇杆

| **操作手法**                           | **指令**  |
| -------------------------------------- | --------- |
| 大范围拖拽                             | 移动      |
| 小范围拖拽                             | 移动+普攻 |
| 点击                                   | 普攻      |
| 短时间内大范围拖拽（可以理解成甩技能） | 技能      |
| 长时间蓄力抬手                         | 大招      |

方案1落地后，**发现玩家对于KeyDown/KeyUp/Drag很好理解，但是对于“范围”、“按压时间”却很难感知（特别是在鏖战时）**，于是我们引入Vibration插件，通过手机震动来作为“范围”反馈；通过UI和特效等视觉元素来作为“按压时间”反馈。



### 三、“一”生万物

经过上述尝试后开始反思：将多个维度操作糅合在一个UI上，这种思路可能行不通，一个UI操作负担太重。

那么就需要拆分UI，将一个UI拆分三个UI。

方案2是：

| **UI** | **操作手法** | **指令**  |
| ------ | ------------ | --------- |
| 摇杆1  | 大范围拖拽   | 移动      |
|        | 小范围拖拽   | 移动+普攻 |
|        | 点击         | 普攻      |
| 摇杆2  | 拖拽抬手     | 技能      |
| 摇杆3  | 拖拽抬手     | 大招      |

同时为了保证适配各种玩家操作习惯和机型，则**必须要支持左右手模式和玩家自定义布局**。

相比于方案1，方案2将五个操作拆到了三个UI上，一定程度上减少了操作负担。

但是发现摇杆1既要控制移动又要控制普攻，依然很累。而且既然“发现了敌人，点摇杆普攻”是人之常情，那么为什么不做成“自动普攻”呢？

于是方案3是：加入**自动普攻**。

这样摇杆1似乎就只有一个功能，那就是控制移动。



### 四、自动普攻

加入自动普攻功能之后，理论上全场就不需要点击摇杆1（点击了也只是一个安慰效果），自然也就是走哪打哪、停下来就自己锁敌自己打。

于是，另一个问题出现了：当英雄停下来回城的时候，身边正好有一个敌人经过，自动普攻机制则会进攻该敌人，于是回城被打断。也就是说，进入敌方英雄的普攻范围，便可以打断敌方英雄的回城，这似乎成为了一种“诡异”的战略。

**于是接下来思考的点是：**

- 普攻要区分自动普攻和手动普攻；
- 普攻范围需要调整；
- 如何设计机制限制自动普攻。

**代码层面落地便是：**

- 自动普攻和手动普攻用一个参数tag区分，该参数一直传到技能模块；
- 普攻范围不单单由配表决定，而是由配表和tag共同决定，抽封一个方法，再全局替换（当时想过用元表，但是为了一个字段，太重）；



至于第3点，**设计一个什么机制来限制自动普攻？**

方案4是：KeyUp关闭自动普攻；

方案5是：根据摇杆拖拽距离判断是否执行自动普攻（项目组内俗称“大小圆”）；

方案6是：设计一个数值（比如，体力值）来限制自动普攻（于是这里面又涉及到体力值的消耗和恢复逻辑）；

探索之路走到这里，已经是Control模块迭代的第10个版本了（上述方案4、5、6有多个子方案验证），最后连负责的策划都已经记不清Debug面板中“方案3”和“方案6”有什么区别了，策划也需要注释了。



### 五、单手还是双手？

其实上述所有一切都基于一个base，那就是单手操作。所以**技术上也实现了一定的多指触控限制**，也就是当出现多指操作屏幕的时候，永远保证只有一个手指是有效的，多余的触控要屏蔽掉。

而这时候，已经开始对“单手”这一定位产生了疑问。

于是方案7顺理浮出水面：

将攻击和移动从一个摇杆中拆分出来

| **UI**               | **操作手法** | **指令** |
| -------------------- | ------------ | -------- |
| 摇杆1（屏幕左侧）    | 拖拽         | 移动     |
| 摇杆2（屏幕右侧）    | 拖拽抬手     | 技能     |
| 摇杆3（屏幕右侧）    | 拖拽抬手     | 大招     |
| 普攻按键（屏幕右侧） | 点击         | 普攻     |

也就是说，方案7已经开始尝试推翻“单手”这一定位，所以自然也需要**迭代多指触控规则**。

同时，在技术上保证了：**玩家可以选左手模式、右手模式和双手模式。** 三种模式不单单是UI布局不同，也包括UI数目不同、多指触控规则不同。

接下来，方案8：新增推塔按键（因为考虑到竖屏局限，没有新增补兵按键，推塔、补兵二合一）



### 六、真的要竖屏吗？

再接下来，便是一次较大的反思：对竖屏的反思。

于是方案9：将游戏做成横屏，同时也是一版新的多指触控规则。（这个时候就很接近“王者”了）

并且横竖屏模式需要**在游戏运行时根据设备陀螺仪旋转也横竖屏切换**。



### 七、还可以更多

游戏改成横屏之后，我们又做了什么？

**其一，玩家手指热力图。** 可以知道每一场游戏玩家手指都触屏过哪些地方。

**其二，竞品操作数据对比。** 通过Root工具导出王者操作数据进行对比，比如，王者虞姬操作技能摇杆大约在50+次，而J2对应英雄操作技能摇杆大约在130+次（上述数据归一化到10min之内）。

**其三，操作数据异常检测及每日飞书推送，便于实时跟进。** 比如，S同学在一场游戏中转镜头270+次，W同学在一场游戏中一技能无效操作260+次。



### 八、终成过往

从我接下这个模块伊始，走完上述这条探索之路**一共走了16个月**。期间其实更大的头疼点不在于上述某个方案的落地实现，而在于上述**各种方案必须同时融合在游戏中，以便策划在运行时切换验证**。而这16个月里，CE评分也一路从1.9'上升到3.65'，但是我内心总有一种声音：正是因为我们逐步放弃“特色”而融入“大流”，CE评分才一路上升。

真是不禁让人感慨。

如今我回过头来看这段经历时，从过程上看，我觉得 如果我对游戏有更高的认识或者更丰富的经历，也许我还可以更进一步和策划共同探索。但即便如此，我依然觉得我已经尽最大努力和策划并肩作战（其中也包括前赴后继的QA同学），“去做别人没做过的事”，我也从他们身上我学到了很多。

虽然从结果上看，这条探索之路是失败了。

而未来有一天，如果市场上真的爆了一款竖屏MOBA，我一定会去看看，也一定会想起这段时光。

**风，把一切都会吹干的。**

**云卷云舒，终成过往。**